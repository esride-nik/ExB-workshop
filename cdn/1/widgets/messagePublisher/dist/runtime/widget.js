System.register(["jimu-core","jimu-ui","jimu-core/react"],(function(e,t){var a={},n={},r={};return{setters:[function(e){a.DataRecordSetChangeMessage=e.DataRecordSetChangeMessage,a.DataRecordsSelectionChangeMessage=e.DataRecordsSelectionChangeMessage,a.DataSourceComponent=e.DataSourceComponent,a.MessageManager=e.MessageManager,a.React=e.React,a.RecordSetChangeType=e.RecordSetChangeType},function(e){n.Button=e.Button},function(e){r.useState=e.useState}],execute:function(){e((()=>{var e={8891:e=>{"use strict";e.exports=a},1315:e=>{"use strict";e.exports=r},726:e=>{"use strict";e.exports=n}},t={};function o(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,o),r.exports}o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="";var s={};return o.p=window.jimuConfig.baseUrl,(()=>{"use strict";o.r(s),o.d(s,{__set_webpack_public_path__:()=>c,default:()=>r});var e=o(8891),t=o(726),a=o(1315),n=function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function c(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,c)}u((n=n.apply(e,t||[])).next())}))};function r(r){var o;const[s,c]=(0,a.useState)(void 0),u=()=>n(this,void 0,void 0,(function*(){var t;const a=(null===(t=r.useDataSources)||void 0===t?void 0:t[0].fields)[0],n=yield s.query({where:"1=1",outFields:[a],orderByFields:[`${a} DESC`],pageSize:3,page:1,returnGeometry:!0}),o=null==n?void 0:n.records;((t,a)=>{e.MessageManager.getInstance().publishMessage(new e.DataRecordsSelectionChangeMessage(t,a));const n=[{dataSource:a[0].dataSource,fields:a[0].dataSource.layer.fields.map((e=>e.name)),name:a[0].dataSource.id,records:a,type:"loaded"}];e.MessageManager.getInstance().publishMessage(new e.DataRecordSetChangeMessage(t,e.RecordSetChangeType.CreateUpdate,n))})(r.id,o)}));return e.React.createElement(e.React.Fragment,null,e.React.createElement(t.Button,{onClick:()=>{u()}},"Publish message"),e.React.createElement(e.DataSourceComponent,{useDataSource:null===(o=r.useDataSources)||void 0===o?void 0:o[0],widgetId:r.id,queryCount:!0,onDataSourceCreated:e=>{c(e)}}))}function c(e){o.p=e}})(),s})())}}}));